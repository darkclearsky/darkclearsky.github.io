<!DOCTYPE html>
<html>
<meta charset = "UTF-8">
<style type="text/css">
	.LText { font-family: Courier; font-size:16px; font-weight:bold; vertical-align: top; text-align: left; background-color: white; }
	.RText { font-family: Courier; font-size:16px; font-weight:bold; vertical-align: top; text-align: right; background-color: white; }
	.CText { font-family: Courier; font-size:16px; font-weight:bold; vertical-align: top; text-align: center; color: black; background-color: white; }
    .Table { display:table }
    .Row { display: table-row; background-color: white; height: 40px; }
    .Cell { display: table-cell; vertical-align: top; text-align: left; border: 0px solid black; padding-left: 5px; padding-right: 5px; }
    .CharCell { display: table-cell; column-span:2; vertical-align: top; border: 0px solid black; padding-left: 0px; padding-right: 0px; width:1000px}
</style>
<body>
<div class = "Table">
	<div class = "Row">
			<div class = "Cell" id="RefreshThis">
				<div class = "LText" id="DataDate">Loading...</div>
				<select hidden class="LText" id="CountrySelect"><option>Loading...</option></select>
				<select hidden class="LText" id="RegionSelect"></select>
			</div>
	</div>
	<div class = "Row">
		<div class = "ChartCell">
			<canvas id="ChartArea" width=1300 height=1600 style="border:0px solid #ffffff; background-color:white;">
			Your browser does not support HTML5
			</canvas>
		</div>
	</div>
</div>

</body>

<script src=VaxSource.js></script>
<script src=VaxDataCountry.js></script>

<script src=RegData_0.js></script>
<script src=RegData_1.js></script>
<script src=RegData_2.js></script>
<script src=RegData_3.js></script>
<script src=RegData_4.js></script>
<script src=RegData_5.js></script>
<script src=RegData_6.js></script>
<script src=RegData_7.js></script>
<script src=RegData_8.js></script>
<script src=RegData_9.js></script>
<script src=RegData_10.js></script>
<script src=RegData_11.js></script>
<script src=RegData_12.js></script>
<script src=RegData_13.js></script>
<script src=RegData_14.js></script>
<script src=RegData_15.js></script>
<script src=RegData_16.js></script>
<script src=RegData_17.js></script>
<script src=RegData_18.js></script>
<script src=RegData_19.js></script>
<script src=RegData_20.js></script>
<script src=RegData_21.js></script>
<script src=RegData_22.js></script>
<script src=RegData_23.js></script>
<script src=RegData_24.js></script>
<script src=RegData_25.js></script>
<script src=RegData_26.js></script>
<script src=RegData_27.js></script>
<script src=RegData_28.js></script>
<script src=RegData_29.js></script>
<script src=RegData_30.js></script>
<script src=RegData_31.js></script>
<script src=RegData_32.js></script>
<script src=RegData_33.js></script>
<script src=RegData_34.js></script>
<script src=RegData_35.js></script>
<script src=RegData_36.js></script>
<script src=RegData_37.js></script>
<script src=RegData_38.js></script>
<script src=RegData_39.js></script>
<script src=RegData_40.js></script>
<script src=RegData_41.js></script>
<script src=RegData_42.js></script>
<script src=RegData_43.js></script>
<script src=RegData_44.js></script>
<script src=RegData_45.js></script>
<script src=RegData_46.js></script>
<script src=RegData_47.js></script>
<script src=RegData_48.js></script>
<script src=RegData_49.js></script>
<script src=RegData_50.js></script>
<script src=RegData_51.js></script>
<script src=RegData_52.js></script>
<script src=RegData_53.js></script>
<script src=RegData_54.js></script>
<script src=RegData_55.js></script>
<script src=RegData_56.js></script>
<script src=RegData_57.js></script>
<script src=RegData_58.js></script>
<script src=RegData_59.js></script>
<script src=RegData_60.js></script>
<script src=RegData_61.js></script>
<script src=RegData_62.js></script>
<script src=RegData_63.js></script>
<script src=RegData_64.js></script>
<script src=RegData_65.js></script>
<script src=RegData_66.js></script>
<script src=RegData_67.js></script>
<script src=RegData_68.js></script>
<script src=RegData_69.js></script>
<script src=RegData_70.js></script>
<script src=RegData_71.js></script>
<script src=RegData_72.js></script>
<script src=RegData_73.js></script>
<script src=RegData_74.js></script>
<script src=RegData_75.js></script>
<script src=RegData_76.js></script>
<script src=RegData_77.js></script>
<script src=RegData_78.js></script>
<script src=RegData_79.js></script>
<script src=RegData_80.js></script>
<script src=RegData_81.js></script>
<script src=RegData_82.js></script>
<script src=RegData_83.js></script>
<script src=RegData_84.js></script>
<script src=RegData_85.js></script>
<script src=RegData_86.js></script>
<script src=RegData_87.js></script>
<script src=RegData_88.js></script>
<script src=RegData_89.js></script>
<script src=RegData_90.js></script>
<script src=RegData_91.js></script>
<script src=RegData_92.js></script>
<script src=RegData_93.js></script>
<script src=RegData_94.js></script>
<script src=RegData_95.js></script>
<script src=RegData_96.js></script>
<script src=RegData_97.js></script>
<script src=RegData_98.js></script>
<script src=RegData_99.js></script>
<script src=RegData_100.js></script>
<script src=RegData_101.js></script>
<script src=RegData_102.js></script>
<script src=RegData_103.js></script>
<script src=RegData_104.js></script>
<script src=RegData_105.js></script>
<script src=RegData_106.js></script>
<script src=RegData_107.js></script>
<script src=RegData_108.js></script>
<script src=RegData_109.js></script>
<script src=RegData_110.js></script>
<script src=RegData_111.js></script>
<script src=RegData_112.js></script>
<script src=RegData_113.js></script>
<script src=RegData_114.js></script>
<script src=RegData_115.js></script>
<script src=RegData_116.js></script>
<script src=RegData_117.js></script>
<script src=RegData_118.js></script>
<script src=RegData_119.js></script>
<script src=RegData_120.js></script>
<script src=RegData_121.js></script>
<script src=RegData_122.js></script>
<script src=RegData_123.js></script>
<script src=RegData_124.js></script>
<script src=RegData_125.js></script>
<script src=RegData_126.js></script>
<script src=RegData_127.js></script>
<script src=RegData_128.js></script>
<script src=RegData_129.js></script>
<script src=RegData_130.js></script>
<script src=RegData_131.js></script>
<script src=RegData_132.js></script>
<script src=RegData_133.js></script>
<script src=RegData_134.js></script>
<script src=RegData_135.js></script>
<script src=RegData_136.js></script>
<script src=RegData_137.js></script>
<script src=RegData_138.js></script>
<script src=RegData_139.js></script>
<script src=RegData_140.js></script>
<script src=RegData_141.js></script>
<script src=RegData_142.js></script>
<script src=RegData_143.js></script>
<script src=RegData_144.js></script>
<script src=RegData_145.js></script>
<script src=RegData_146.js></script>
<script src=RegData_147.js></script>
<script src=RegData_148.js></script>
<script src=RegData_149.js></script>
<script src=RegData_150.js></script>
<script src=RegData_151.js></script>
<script src=RegData_152.js></script>
<script src=RegData_153.js></script>
<script src=RegData_154.js></script>
<script src=RegData_155.js></script>
<script src=RegData_156.js></script>
<script src=RegData_157.js></script>
<script src=RegData_158.js></script>
<script src=RegData_159.js></script>
<script src=RegData_160.js></script>
<script src=RegData_161.js></script>
<script src=RegData_162.js></script>
<script src=RegData_163.js></script>
<script src=RegData_164.js></script>
<script src=RegData_165.js></script>
<script src=RegData_166.js></script>
<script src=RegData_167.js></script>
<script src=RegData_168.js></script>
<script src=RegData_169.js></script>
<script src=RegData_170.js></script>
<script src=RegData_171.js></script>
<script src=RegData_172.js></script>
<script src=RegData_173.js></script>
<script src=RegData_174.js></script>
<script src=RegData_175.js></script>
<script src=RegData_176.js></script>
<script src=RegData_177.js></script>
<script src=RegData_178.js></script>
<script src=RegData_179.js></script>
<script src=RegData_180.js></script>
<script src=RegData_181.js></script>
<script src=RegData_182.js></script>
<script src=RegData_183.js></script>
<script src=RegData_184.js></script>
<script src=RegData_185.js></script>
<script src=RegData_186.js></script>
<script src=RegData_187.js></script>
<script src=RegData_188.js></script>
<script src=RegData_189.js></script>
<script src=RegData_190.js></script>
<script src=RegData_191.js></script>
<script src=RegData_192.js></script>
<script src=RegData_193.js></script>
<script src=RegData_194.js></script>
<script src=RegData_195.js></script>
<script src=RegData_196.js></script>
<script src=RegData_197.js></script>
<script src=RegData_198.js></script>
<script src=RegData_199.js></script>
<script src=RegData_200.js></script>
<script src=RegData_201.js></script>
<script src=RegData_202.js></script>
<script src=RegData_203.js></script>
<script src=RegData_204.js></script>
<script src=RegData_205.js></script>
<script src=RegData_206.js></script>
<script src=RegData_207.js></script>
<script src=RegData_208.js></script>
<script src=RegData_209.js></script>
<script src=RegData_210.js></script>
<script src=RegData_211.js></script>
<script src=RegData_212.js></script>
<script src=RegData_213.js></script>
<script src=RegData_214.js></script>
<script src=RegData_215.js></script>
<script src=RegData_216.js></script>
<script src=RegData_217.js></script>
<script src=RegData_218.js></script>
<script src=RegData_219.js></script>
<script src=RegData_220.js></script>
<script src=RegData_221.js></script>
<script src=RegData_222.js></script>
<script src=RegData_223.js></script>
<script src=RegData_224.js></script>
<script src=RegData_225.js></script>
<script src=RegData_226.js></script>
<script src=RegData_227.js></script>
<script src=RegData_228.js></script>
<script src=RegData_229.js></script>
<script src=RegData_230.js></script>
<script src=RegData_231.js></script>
<script src=RegData_232.js></script>
<script src=RegData_233.js></script>
<script src=RegData_234.js></script>
<script src=RegData_235.js></script>
<script src=RegData_236.js></script>
<script src=RegData_237.js></script>
<script src=RegData_238.js></script>
<script src=RegData_239.js></script>
<script src=RegData_240.js></script>
<script src=RegData_241.js></script>
<script src=RegData_242.js></script>
<script src=RegData_243.js></script>
<script src=RegData_244.js></script>
<script src=RegData_245.js></script>
<script src=RegData_246.js></script>
<script src=RegData_247.js></script>
<script src=RegData_248.js></script>
<script src=RegData_249.js></script>
<script src=RegData_250.js></script>
<script src=RegData_251.js></script>
<script src=RegData_252.js></script>
<script src=RegData_253.js></script>
<script src=RegData_254.js></script>
<script src=RegData_255.js></script>
<script src=RegData_256.js></script>
<script src=RegData_257.js></script>
<script src=RegData_258.js></script>
<script src=RegData_259.js></script>
<script src=RegData_260.js></script>
<script src=RegData_261.js></script>
<script src=RegData_262.js></script>
<script src=RegData_263.js></script>
<script src=RegData_264.js></script>
<script src=RegData_265.js></script>
<script src=RegData_266.js></script>
<script src=RegData_267.js></script>
<script src=RegData_268.js></script>
<script src=RegData_269.js></script>
<script src=RegData_270.js></script>
<script src=RegData_271.js></script>
<script src=RegData_272.js></script>
<script src=RegData_273.js></script>
<script src=RegData_274.js></script>
<script src=RegData_275.js></script>
<script src=RegData_276.js></script>
<script src=RegData_277.js></script>
<script src=RegData_278.js></script>
<script src=RegData_279.js></script>
<script src=RegData_280.js></script>
<script src=RegData_281.js></script>
<script src=RegData_282.js></script>
<script src=RegData_283.js></script>
<script src=RegData_284.js></script>
<script src=RegData_285.js></script>
<script src=RegData_286.js></script>
<script src=RegData_287.js></script>
<script src=RegData_288.js></script>
<script src=RegData_289.js></script>
<script src=RegData_290.js></script>
<script src=RegData_291.js></script>
<script src=RegData_292.js></script>
<script src=RegData_293.js></script>
<script src=RegData_294.js></script>
<script src=RegData_295.js></script>
<script src=RegData_296.js></script>
<script src=RegData_297.js></script>
<script src=RegData_298.js></script>
<script src=RegData_299.js></script>
<script src=RegData_300.js></script>
<script src=RegData_301.js></script>
<script src=RegData_302.js></script>
<script src=RegData_303.js></script>
<script src=RegData_304.js></script>
<script src=RegData_305.js></script>
<script src=RegData_306.js></script>
<script src=RegData_307.js></script>
<script src=RegData_308.js></script>
<script src=RegData_309.js></script>
<script src=RegData_310.js></script>
<script src=RegData_311.js></script>
<script src=RegData_312.js></script>
<script src=RegData_313.js></script>
<script src=RegData_314.js></script>
<script src=RegData_315.js></script>
<script src=RegData_316.js></script>
<script src=RegData_317.js></script>
<script src=RegData_318.js></script>
<script src=RegData_319.js></script>
<script src=RegData_320.js></script>
<script src=RegData_321.js></script>
<script src=RegData_322.js></script>
<script src=RegData_323.js></script>
<script src=RegData_324.js></script>
<script src=RegData_325.js></script>
<script src=RegData_326.js></script>
<script src=RegData_327.js></script>
<script src=RegData_328.js></script>
<script src=RegData_329.js></script>
<script src=RegData_330.js></script>
<script src=RegData_331.js></script>
<script src=RegData_332.js></script>
<script src=RegData_333.js></script>
<script src=RegData_334.js></script>
<script src=RegData_335.js></script>
<script src=RegData_336.js></script>
<script src=RegData_337.js></script>
<script src=RegData_338.js></script>
<script src=RegData_339.js></script>
<script src=RegData_340.js></script>
<script src=RegData_341.js></script>
<script src=RegData_342.js></script>
<script src=RegData_343.js></script>
<script src=RegData_344.js></script>
<script src=RegData_345.js></script>
<script src=RegData_346.js></script>
<script src=RegData_347.js></script>
<script src=RegData_348.js></script>
<script src=RegData_349.js></script>
<script src=RegData_350.js></script>
<script src=RegData_351.js></script>
<script src=RegData_352.js></script>
<script src=RegData_353.js></script>
<script src=RegData_354.js></script>
<script src=RegData_355.js></script>
<script src=RegData_356.js></script>
<script src=RegData_357.js></script>
<script src=RegData_358.js></script>
<script src=RegData_359.js></script>
<script src=RegData_360.js></script>
<script src=RegData_361.js></script>
<script src=RegData_362.js></script>
<script src=RegData_363.js></script>
<script src=RegData_364.js></script>
<script src=RegData_365.js></script>
<script src=RegData_366.js></script>
<script src=RegData_367.js></script>
<script src=RegData_368.js></script>
<script src=RegData_369.js></script>
<script src=RegData_370.js></script>
<script src=RegData_371.js></script>
<script src=RegData_372.js></script>
<script src=RegData_373.js></script>
<script src=RegData_374.js></script>
<script src=RegData_375.js></script>
<script src=RegData_376.js></script>
<script src=RegData_377.js></script>
<script src=RegData_378.js></script>
<script src=RegData_379.js></script>
<script src=RegData_380.js></script>
<script src=RegData_381.js></script>
<script src=RegData_382.js></script>
<script src=RegData_383.js></script>
<script src=RegData_384.js></script>
<script src=RegData_385.js></script>
<script src=RegData_386.js></script>
<script src=RegData_387.js></script>
<script src=RegData_388.js></script>
<script src=RegData_389.js></script>
<script src=RegData_390.js></script>
<script src=RegData_391.js></script>
<script src=RegData_392.js></script>
<script src=RegData_393.js></script>
<script src=RegData_394.js></script>
<script src=RegData_395.js></script>
<script src=RegData_396.js></script>
<script src=RegData_397.js></script>
<script src=RegData_398.js></script>
<script src=RegData_399.js></script>
<script src=RegData_400.js></script>
<script src=RegData_401.js></script>
<script src=RegData_402.js></script>
<script src=RegData_403.js></script>
<script src=RegData_404.js></script>
<script src=RegData_405.js></script>
<script src=RegData_406.js></script>
<script src=RegData_407.js></script>
<script src=RegData_408.js></script>
<script src=RegData_409.js></script>
<script src=RegData_410.js></script>
<script src=RegData_411.js></script>
<script src=RegData_412.js></script>
<script src=RegData_413.js></script>
<script src=RegData_414.js></script>
<script src=RegData_415.js></script>
<script src=RegData_416.js></script>
<script src=RegData_417.js></script>
<script src=RegData_418.js></script>
<script src=RegData_419.js></script>
<script src=RegData_420.js></script>
<script src=RegData_421.js></script>
<script src=RegData_422.js></script>
<script src=RegData_423.js></script>
<script src=RegData_424.js></script>
<script src=RegData_425.js></script>
<script src=RegData_426.js></script>
<script src=RegData_427.js></script>
<script src=RegData_428.js></script>
<script src=RegData_429.js></script>
<script src=RegData_430.js></script>
<script src=RegData_431.js></script>
<script src=RegData_432.js></script>
<script src=RegData_433.js></script>
<script src=RegData_434.js></script>
<script src=RegData_435.js></script>
<script src=RegData_436.js></script>
<script src=RegData_437.js></script>
<script src=RegData_438.js></script>
<script src=RegData_439.js></script>
<script src=RegData_440.js></script>
<script src=RegData_441.js></script>
<script src=RegData_442.js></script>
<script src=RegData_443.js></script>
<script src=RegData_444.js></script>
<script src=RegData_445.js></script>
<script src=RegData_446.js></script>
<script src=RegData_447.js></script>
<script src=RegData_448.js></script>
<script src=RegData_449.js></script>
<script src=RegData_450.js></script>
<script src=RegData_451.js></script>
<script src=RegData_452.js></script>
<script src=RegData_453.js></script>
<script src=RegData_454.js></script>
<script src=RegData_455.js></script>
<script src=RegData_456.js></script>
<script src=RegData_457.js></script>
<script src=RegData_458.js></script>
<script src=RegData_459.js></script>
<script src=RegData_460.js></script>
<script src=RegData_461.js></script>
<script src=RegData_462.js></script>
<script src=RegData_463.js></script>
<script src=RegData_464.js></script>
<script src=RegData_465.js></script>
<script src=RegData_466.js></script>
<script src=RegData_467.js></script>
<script src=RegData_468.js></script>
<script src=RegData_469.js></script>
<script src=RegData_470.js></script>
<script src=RegData_471.js></script>
<script src=RegData_472.js></script>
<script src=RegData_473.js></script>
<script src=RegData_474.js></script>
<script src=RegData_475.js></script>
<script src=RegData_476.js></script>
<script src=RegData_477.js></script>
<script src=RegData_478.js></script>
<script src=RegData_479.js></script>
<script src=RegData_480.js></script>
<script src=RegData_481.js></script>
<script src=RegData_482.js></script>
<script src=RegData_483.js></script>
<script src=RegData_484.js></script>
<script src=RegData_485.js></script>
<script src=RegData_486.js></script>
<script src=RegData_487.js></script>
<script src=RegData_488.js></script>
<script src=RegData_489.js></script>
<script src=RegData_490.js></script>
<script src=RegData_491.js></script>
<script src=RegData_492.js></script>
<script src=RegData_493.js></script>
<script src=RegData_494.js></script>
<script src=RegData_495.js></script>
<script src=RegData_496.js></script>
<script src=RegData_497.js></script>
<script src=RegData_498.js></script>
<script src=RegData_499.js></script>
<script src=RegData_500.js></script>
<script src=RegData_501.js></script>
<script src=RegData_502.js></script>
<script src=RegData_503.js></script>
<script src=RegData_504.js></script>
<script src=RegData_505.js></script>
<script src=RegData_506.js></script>
<script src=RegData_507.js></script>
<script src=RegData_508.js></script>
<script src=RegData_509.js></script>
<script src=RegData_510.js></script>
<script src=RegData_511.js></script>
<script src=RegData_512.js></script>
<script src=RegData_513.js></script>
<script src=RegData_514.js></script>
<script src=RegData_515.js></script>
<script src=RegData_516.js></script>
<script src=RegData_517.js></script>
<script src=RegData_518.js></script>
<script src=RegData_519.js></script>
<script src=RegData_520.js></script>
<script src=RegData_521.js></script>
<script src=RegData_522.js></script>
<script src=RegData_523.js></script>
<script src=RegData_524.js></script>
<script src=RegData_525.js></script>
<script src=RegData_526.js></script>
<script src=RegData_527.js></script>
<script src=RegData_528.js></script>
<script src=RegData_529.js></script>
<script src=RegData_530.js></script>
<script src=RegData_531.js></script>
<script src=RegData_532.js></script>
<script src=RegData_533.js></script>
<script src=RegData_534.js></script>
<script src=RegData_535.js></script>
<script src=RegData_536.js></script>
<script src=RegData_537.js></script>
<script src=RegData_538.js></script>
<script src=RegData_539.js></script>
<script src=RegData_540.js></script>
<script src=RegData_541.js></script>
<script src=RegData_542.js></script>
<script src=RegData_543.js></script>
<script src=RegData_544.js></script>
<script src=RegData_545.js></script>
<script src=RegData_546.js></script>
<script src=RegData_547.js></script>
<script src=RegData_548.js></script>
<script src=RegData_549.js></script>
<script src=RegData_550.js></script>
<script src=RegData_551.js></script>
<script src=RegData_552.js></script>
<script src=RegData_553.js></script>
<script src=RegData_554.js></script>
<script src=RegData_555.js></script>
<script src=RegData_556.js></script>
<script src=RegData_557.js></script>
<script src=RegData_558.js></script>
<script src=RegData_559.js></script>
<script src=RegData_560.js></script>
<script src=RegData_561.js></script>
<script src=RegData_562.js></script>
<script src=RegData_563.js></script>
<script src=RegData_564.js></script>
<script src=RegData_565.js></script>
<script src=RegData_566.js></script>
<script src=RegData_567.js></script>
<script src=RegData_568.js></script>
<script src=RegData_569.js></script>
<script src=RegData_570.js></script>
<script src=RegData_571.js></script>
<script src=RegData_572.js></script>
<script src=RegData_573.js></script>
<script src=RegData_574.js></script>
<script src=RegData_575.js></script>
<script src=RegData_576.js></script>
<script src=RegData_577.js></script>
<script src=RegData_578.js></script>
<script src=RegData_579.js></script>
<script src=RegData_580.js></script>
<script src=RegData_581.js></script>
<script src=RegData_582.js></script>
<script src=RegData_583.js></script>
<script src=RegData_584.js></script>
<script src=RegData_585.js></script>
<script src=RegData_586.js></script>
<script src=RegData_587.js></script>
<script src=RegData_588.js></script>
<script src=RegData_589.js></script>
<script src=RegData_590.js></script>
<script src=RegData_591.js></script>
<script src=RegData_592.js></script>
<script src=RegData_593.js></script>
<script src=RegData_594.js></script>
<script src=RegData_595.js></script>
<script src=RegData_596.js></script>
<script src=RegData_597.js></script>
<script src=RegData_598.js></script>
<script src=RegData_599.js></script>
<script src=RegData_600.js></script>
<script src=RegData_601.js></script>
<script src=RegData_602.js></script>
<script src=RegData_603.js></script>
<script src=RegData_604.js></script>
<script src=RegData_605.js></script>
<script src=RegData_606.js></script>
<script src=RegData_607.js></script>
<script src=RegData_608.js></script>
<script src=RegData_609.js></script>
<script src=RegData_610.js></script>
<script src=RegData_611.js></script>
<script src=RegData_612.js></script>
<script src=RegData_613.js></script>
<script src=RegData_614.js></script>
<script src=RegData_615.js></script>
<script src=RegData_616.js></script>
<script src=RegData_617.js></script>
<script src=RegData_618.js></script>
<script src=RegData_619.js></script>
<script src=RegData_620.js></script>
<script src=RegData_621.js></script>
<script src=RegData_622.js></script>
<script src=RegData_623.js></script>
<script src=RegData_624.js></script>
<script src=RegData_625.js></script>
<script src=RegData_626.js></script>
<script src=RegData_627.js></script>
<script src=RegData_628.js></script>
<script src=RegData_629.js></script>
<script src=RegData_630.js></script>
<script src=RegData_631.js></script>
<script src=RegData_632.js></script>
<script src=RegData_633.js></script>
<script src=RegData_634.js></script>
<script src=RegData_635.js></script>
<script src=RegData_636.js></script>
<script src=RegData_637.js></script>
<script src=RegData_638.js></script>
<script src=RegData_639.js></script>
<script src=RegData_640.js></script>
<script src=RegData_641.js></script>
<script src=RegData_642.js></script>
<script src=RegData_643.js></script>
<script src=RegData_644.js></script>
<script src=RegData_645.js></script>
<script src=RegData_646.js></script>
<script src=RegData_647.js></script>
<script src=RegData_648.js></script>
<script src=RegData_649.js></script>
<script src=RegData_650.js></script>
<script src=RegData_651.js></script>
<script src=RegData_652.js></script>
<script src=RegData_653.js></script>
<script src=RegData_654.js></script>
<script src=RegData_655.js></script>
<script src=RegData_656.js></script>
<script src=RegData_657.js></script>
<script src=RegData_658.js></script>
<script src=RegData_659.js></script>
<script src=RegData_660.js></script>
<script src=RegData_661.js></script>
<script src=RegData_662.js></script>
<script src=RegData_663.js></script>
<script src=RegData_664.js></script>
<script src=RegData_665.js></script>
<script src=RegData_666.js></script>
<script src=RegData_667.js></script>
<script src=RegData_668.js></script>
<script src=RegData_669.js></script>
<script src=RegData_670.js></script>
<script src=RegData_671.js></script>
<script src=RegData_672.js></script>
<script src=RegData_673.js></script>
<script src=RegData_674.js></script>
<script src=RegData_675.js></script>
<script src=RegData_676.js></script>
<script src=RegData_677.js></script>
<script src=RegData_678.js></script>
<script src=RegData_679.js></script>
<script src=RegData_680.js></script>
<script src=RegData_681.js></script>
<script src=RegData_682.js></script>
<script src=RegData_683.js></script>
<script src=RegData_684.js></script>
<script src=RegData_685.js></script>
<script src=RegData_686.js></script>
<script src=RegData_687.js></script>
<script src=RegData_688.js></script>
<script src=RegData_689.js></script>
<script src=RegData_690.js></script>
<script src=RegData_691.js></script>
<script src=RegData_692.js></script>
<script src=RegData_693.js></script>
<script src=RegData_694.js></script>
<script src=RegData_695.js></script>
<script src=RegData_696.js></script>
<script src=RegData_697.js></script>
<script src=RegData_698.js></script>
<script src=RegData_699.js></script>
<script src=RegData_700.js></script>
<script src=RegData_701.js></script>
<script src=RegData_702.js></script>
<script src=RegData_703.js></script>
<script src=RegData_704.js></script>
<script src=RegData_705.js></script>
<script src=RegData_706.js></script>
<script src=RegData_707.js></script>
<script src=RegData_708.js></script>
<script src=RegData_709.js></script>
<script src=RegData_710.js></script>
<script src=RegData_711.js></script>
<script src=RegData_712.js></script>
<script src=RegData_713.js></script>
<script src=RegData_714.js></script>
<script src=RegData_715.js></script>
<script src=RegData_716.js></script>
<script src=RegData_717.js></script>
<script src=RegData_718.js></script>
<script src=RegData_719.js></script>
<script src=RegData_720.js></script>
<script src=RegData_721.js></script>
<script src=RegData_722.js></script>
<script src=RegData_723.js></script>
<script src=RegData_724.js></script>

<script>

function DecToHex(h)
{
	if(h < 0)
		return("00");
	if(h < 15)
		return("0" + h.toString(16));
	if(h > 255)
		return("ff");
	return(h.toString(16));
}

function ClearScreen()
{
	// clear canvas
	ctx.globalAlpha = 1.0;
	ctx.fillStyle = "white";
	ctx.fillRect(0,0,canvas.width,canvas.height);
}

function GetVaccine(Country)
{
	var x;
	for(x=0;x<VaxByCountry.length;x++)
		if(VaxByCountry[x].Location.localeCompare(Country) == 0)
			break;

	if(x == VaxByCountry.length)
		return("");
	else
		return(VaxByCountry[x].Data[0].Vaccines)
}

function DrawDates(Left, Down, Width, Dates)
{
	var x,z,Inset,m,d;
	var Names = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

	var Scale = Width / Dates.length;

	ctx.globalAlpha = 0.8;
	ctx.strokeStyle = "black";
	ctx.lineWidth = 2;
	ctx.textAlign = "center";
	ctx.textBaseline = "bottom";
	ctx.font = "normal 8pt Courier";
	Inset = Left+Scale;
	for(x=0;x<Dates.length;x+=10)
	{
		z = 0;
		m = Names[Number(Dates[x].slice(5,7))-1];
		d = Dates[x].slice(8,10);
		// var md = d + "|" + m;

		ctx.fillText(d,Inset,Down+z*(12));
		for(z=0;z<m.length;z++)
			ctx.fillText(m[z],Inset,Down+((z+1)*12));
		// ctx.strokeText(m + "/" + d,Inset,Down);
		Inset += (Scale*10);
	}
	ctx.textAlign = "left";
}

function XYChart(TopLeft, SizeXY, XEmphasis, Title, ValueSeries1, ValueSeries2, Option)
{
	var x,y;
	var Max = 0;
	var Min = ValueSeries1[0];
	var XScale,YScale;
	var GrowthPercent;
	var TextYOffset;
	var RunningAverage = [];
	var RunningAveragePeriods = 10;

	// eliminate leading zero values
	/*
	for(y=x=0;x<ValueSeries1.length;x++)
	{
		if(ValueSeries1[x] == 0)
			y++;
		else
			break;
	}

	for(x=0;x<y;x++)
	{
		ValueSeries1.shift();
		ValueSeries2.shift();
	}
	*/

	if(Option == 3)
		Max = 100;
	else
	{
		for(x=0;x<ValueSeries1.length;x++)
		{
			if(Max < ValueSeries1[x])
				Max = ValueSeries1[x];
			if(Max < ValueSeries2[x])
				Max = ValueSeries2[x];
	
			if(Min > ValueSeries1[x])
				Min = ValueSeries1[x];
			if(Min > ValueSeries2[x])
				Min = ValueSeries2[x];
		}
	}

	// YScale = SizeXY[1] / (Max-Min);
	YScale = SizeXY[1] / Max;
	XScale = SizeXY[0] / (ValueSeries1.length-1);	// subtract 1 because Y axis is first point on scale

	ctx.globalAlpha = 1.0;
	ctx.strokeStyle = "black";
	ctx.lineWidth = 2;
	ctx.textAlign = "center";
	ctx.textBaseline = "bottom";

	ctx.beginPath();
	ctx.moveTo(TopLeft[0],TopLeft[1]);
	ctx.lineTo(TopLeft[0],TopLeft[1]+SizeXY[1]);
	ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+SizeXY[1]);
	// ctx.closePath();
	ctx.stroke();
	ctx.lineWidth = 1;
	if(SizeXY[0] > 150)
	{
		ctx.font = "normal 10pt Courier";
		TextYOffset = 14;
	}
	else
	{
		ctx.font = "normal 6pt Courier";
		TextYOffset = 10;
	}
	
	ctx.strokeText(Title,TopLeft[0]+(SizeXY[0]/2),TopLeft[1]);

	ctx.textAlign="right";
	ctx.strokeText((Max/2).toFixed(0),TopLeft[0]-6,TopLeft[1]+(SizeXY[1]/2));
	ctx.strokeText(((Max/2)+(Max/4)).toFixed(0),TopLeft[0]-6,TopLeft[1]+(SizeXY[1]/4));
	ctx.strokeText((Max/4).toFixed(0),TopLeft[0]-6,TopLeft[1]+(SizeXY[1]/2)+(SizeXY[1]/4));
	ctx.strokeText(Max,TopLeft[0]+8,TopLeft[1]);
	ctx.textAlign="center";
	for(x=0;x<=ValueSeries1.length-1;x++)
	{
		if(x == XEmphasis)
		{
			ctx.globalAlpha = 1.0;
			ctx.strokeStyle = "green";
		}
		else
		{
			ctx.globalAlpha = 0.5;
			ctx.strokeStyle = "gray";
		}
		ctx.beginPath();
		ctx.moveTo(TopLeft[0]+(XScale*x),TopLeft[1]);
		ctx.lineTo(TopLeft[0]+(XScale*x),TopLeft[1]+SizeXY[1]);
		ctx.stroke();
		/*
		if((x % 5) == 0)
		{
			ctx.globalAlpha = 1.0;
			ctx.strokeStyle = "black";
			ctx.strokeText(x,TopLeft[0]+(XScale*x),TopLeft[1]+SizeXY[1]+TextYOffset);
		}
		*/
	}

	// draw series1 shape and fill
	ctx.globalAlpha = 0.5;
	ctx.strokeStyle = "darkred";
	ctx.fillStyle = "darkred";
	ctx.beginPath();
	//ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]-ValueSeries1[0]));
	ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]-(ValueSeries1[0]*YScale)));
	for(x=1;x<ValueSeries1.length;x++)
		ctx.lineTo(TopLeft[0]+(XScale*x),TopLeft[1]+(SizeXY[1]-(ValueSeries1[x]*YScale)));
	ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+SizeXY[1]);
	ctx.lineTo(TopLeft[0],TopLeft[1]+SizeXY[1]);
	ctx.stroke();
	ctx.closePath();
	ctx.fill();

	if(Option == 0)	// do 10 day running average
	{
		var GoBack;
		for(x=0;x<ValueSeries1.length;x++)
		{
			if(x < RunningAveragePeriods)
				GoBack = 0;
			else
				GoBack = x - RunningAveragePeriods;

			RunningAverage[x] = 0;
			for(y=GoBack;y<x;y++)
				RunningAverage[x] += ValueSeries1[y];
			if(x != 0)
				RunningAverage[x] /= (x - GoBack);
		}
		ctx.globalAlpha = 0.5;
		ctx.strokeStyle = "black";
		ctx.beginPath();
		ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]-(RunningAverage[0]*YScale)));
		for(x=1;x<RunningAverage.length;x++)
			ctx.lineTo(TopLeft[0]+(XScale*x),TopLeft[1]+(SizeXY[1]-(RunningAverage[x]*YScale)));
		ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+SizeXY[1]);
		ctx.lineTo(TopLeft[0],TopLeft[1]+SizeXY[1]);
		ctx.stroke();
	}
	
	if(Option == 1)
	{
		// draw series1 growth shapes and fill **_**
		ctx.globalAlpha = 0.5;
		// console.log("---");
		for(x=1;x<ValueSeries1.length;x++)
		{
			if(ValueSeries1[x-1] == 0)
				ctx.fillStyle = "gray";
			else
			{
				GrowthPercent = Number((ValueSeries1[x] - ValueSeries1[x-1]) / ValueSeries1[x-1]);
				if(GrowthPercent > 0.2)
					ctx.fillStyle = GrowthRateColors[5];
				else
					if(GrowthPercent > 0.1)
						ctx.fillStyle = GrowthRateColors[4];
					else
						if(GrowthPercent > 0.05)
							ctx.fillStyle = GrowthRateColors[3];
						else
							if(GrowthPercent > 0.01)
								ctx.fillStyle = GrowthRateColors[2];
							else
								if(GrowthPercent > 0.001)
									ctx.fillStyle = GrowthRateColors[1];
								else
									if(GrowthPercent < 0)
										ctx.fillStyle = "gray";	// invalid data
									else
										ctx.fillStyle = GrowthRateColors[0];
				// console.log("Growth percent = " + GrowthPercent + " fillstyle = " + ctx.fillStyle);
			}
			ctx.beginPath();
			ctx.moveTo(TopLeft[0]+(XScale*(x-1)),TopLeft[1]+(SizeXY[1]-(ValueSeries1[x-1]*YScale)));
			ctx.lineTo(TopLeft[0]+(XScale*x),TopLeft[1]+(SizeXY[1]-(ValueSeries1[x]*YScale)));
			ctx.lineTo(TopLeft[0]+(XScale*x),TopLeft[1]);
			ctx.lineTo(TopLeft[0]+(XScale*(x-1)),TopLeft[1]);
			ctx.lineTo(TopLeft[0]+(XScale*(x-1)),TopLeft[1]+(SizeXY[1]-(ValueSeries1[x-1]*YScale)));
			ctx.closePath();
			ctx.fill();
		}
	}

	// draw series2 shape and fill
	ctx.globalAlpha = 0.5;
	ctx.strokeStyle = "white";
	ctx.fillStyle = "black";
	ctx.beginPath();
	// ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]-ValueSeries2[0]));
	ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]-(ValueSeries2[0]*YScale)));
	for(x=1;x<ValueSeries2.length;x++)
		ctx.lineTo(TopLeft[0]+(XScale*x),TopLeft[1]+(SizeXY[1]-(ValueSeries2[x]*YScale)));
	ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+SizeXY[1]);
	ctx.lineTo(TopLeft[0],TopLeft[1]+SizeXY[1]);
	ctx.stroke();
	ctx.closePath();
	ctx.fill();

	// draw calibration lines
	ctx.strokeStyle = "white";
	ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]/4));
	ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+(SizeXY[1]/4));
	ctx.stroke();
	ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1]/2));
	ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+(SizeXY[1]/2));
	ctx.stroke();
	ctx.moveTo(TopLeft[0],TopLeft[1]+(SizeXY[1] * 0.75));
	ctx.lineTo(TopLeft[0]+SizeXY[0],TopLeft[1]+(SizeXY[1] * 0.75));
	ctx.stroke();

	ctx.textAlign = "left";
	ctx.textBaseline = "bottom";
}

function Pie(CenterX, CenterY, Radius, Amounts, Labels)
{
	var x,y;
	var cx,cy;
	var lx,ly;
	var Total = 0;
	var OtherPercent;
	var Percents = [];
	var Radians = [];
	var NewLabels = [];
	var NewAmounts = [];
	var LineWidth = 40;
	var RadiansSoFar = 0;
	var PercentCutoff = 0.05;
	var Other = 0;
 
	var Color1 = "#7878A0";
	var Color2 = "#404080";
	var Color3 = "#9090C0";
 
	for(x=0;x<Amounts.length;x++)
	{
		Total += Amounts[x];
	}

	if(Total == 0)
	{
		ctx.textAlign = "center";
		ctx.textBaseline = "bottom";
		ctx.fillStyle = "10px Courier black";
		ctx.fillText("(No data to report)",CenterX,CenterY);
		ctx.textAlign = "left";
		ctx.textBaseline = "bottom";
		return;
	}
 
	for(y=x=0;x<Amounts.length;x++)
	{
		OtherPercent = Amounts[x] / Total;
		if(OtherPercent < PercentCutoff)
			Other += OtherPercent;
		else
		{
			NewLabels[y] = Labels[x];
			NewAmounts[y] = Amounts[x];
			Percents[y++] = OtherPercent;
		}
	}

	NewLabels[y] = "Other (<" + (PercentCutoff*100) + "%)";
	NewAmounts[y] = 0;	// values doesn't really matter here.
	Percents[y++] = Other;
 
	for(x=0;x<y;x++)
	{
		Radians[x] = Percents[x] * (Math.PI * 2);
	}
 
	ctx.font = "normal 12pt Courier";
	// ctx.setBaseline = "top";
	// ctx.textBaseline="middle";
	ctx.textAlign = "center";
	ctx.textBaseline = "bottom";
	RadiansSoFar = 0;
	for(x=0;x<NewAmounts.length;x++)
	{
		// draw arc of graph
		// ctx.fillStyle = ctx.strokeStyle = x==0?Color3:(x%2)==1?Color1:Color2;
		ctx.strokeStyle = ctx.fillStyle = CountyColors[x%6];
		ctx.beginPath();
		ctx.lineWidth = LineWidth;
		ctx.arc(CenterX,CenterY,Radius,RadiansSoFar,RadiansSoFar + Radians[x]);
		ctx.stroke();
 
		// draw label line and label
		/*
		ctx.beginPath();
		ctx.lineWidth = 2;
		lx = cx = CenterX + (Radius * Math.cos(RadiansSoFar+(Radians[x]/2)));
		ly = cy = CenterY + (Radius * Math.sin(RadiansSoFar+(Radians[x]/2)));
		ctx.moveTo(cx,cy);
		cx = CenterX + ((Radius+50) * Math.cos(RadiansSoFar+(Radians[x]/2)));
		cy = CenterY + ((Radius+50) * Math.sin(RadiansSoFar+(Radians[x]/2)));
		ctx.lineTo(cx,cy);
		ctx.stroke();
		*/

		RadiansSoFar += Radians[x];
	}

	RadiansSoFar = 0;
	for(x=0;x<NewAmounts.length;x++)
	{
		// Draw separating line
		ctx.beginPath();
		ctx.strokeStyle = "white";
		ctx.lineWidth = 5;
		cx = CenterX+((Radius * Math.cos(RadiansSoFar+Radians[x]))*1.2);
		cy = CenterY+((Radius * Math.sin(RadiansSoFar+Radians[x]))*1.2);
		ctx.moveTo(CenterX,CenterY);
		ctx.lineTo(cx,cy);
		ctx.stroke();

		RadiansSoFar += Radians[x];
	}

	// draw labels on top of pie segments
	RadiansSoFar = 0;
	ctx.lineWidth = 1;
	ctx.fillStyle = "black";
	ctx.strokeStyle = "white";
	for(x=0;x<Amounts.length;x++)
	{
		cx = CenterX + ((Radius+10) * Math.cos(RadiansSoFar+(Radians[x]/2)));
		cy = CenterY + ((Radius+10) * Math.sin(RadiansSoFar+(Radians[x]/2)));
		ctx.strokeText(NewLabels[x],cx,cy);
		ctx.fillText(NewLabels[x],cx,cy);
		RadiansSoFar += Radians[x];
	}

	// draw total amount in center
	ctx.fillStyle = "black";
	ctx.strokeStyle = "white";
	ctx.strokeText("Total:" + Total,CenterX,CenterY);
	ctx.fillText("Total:" + Total,CenterX,CenterY);

	ctx.textAlign = "left";
	ctx.textBaseline = "bottom";
}

var CountyColors = [ "#1c1a6e","#696e1a","#1a6e28","#1b6769","#645c65","#ba4a00" ];
var SeverityColors = [ "#c0c0c0", "#ff6a1f", "#ba4000", "#ff0000" ];
var DeathSeverityColors = [ "#c0c0c0", "#ff6a1f", "#ba4000", "#ff4000", "#ff0000" ];
var DeathRateColors = [ "#c0c0c0", "#a0a0a0", "#808080", "#404040", "#000000" ];
var GrowthRateColors = [ "#ffffff", "#ffc0c0", "#ffa090", "#ff7050", "#ff3600", "#ff0000" ];
var canvas = document.getElementById("ChartArea");
var ctx = canvas.getContext("2d");
var DateIndex = ReportDate.length-1;	// Start with latest date in set
var StateIndex;
var CountyIndex;
var DisplayIndex = 0;
var ClickData;
var VaccineClickData;
var x,y,z;

ClearScreen();

var DateText = document.getElementById("DataDate");
DateText.innerHTML = "Data from " + ReportDate[0].Date + " to " + ReportDate[DateIndex].Date;
var CountrySelect = document.getElementById("CountrySelect");
var SortedData = ReportDate[DateIndex].Data.sort(
function(a,b) 
	{ 
		o = a.Region.localeCompare(b.Region);
		return(o==0?a.Prov.localeCompare(b.Prov):o);
	} 
);

var StateElem = document.createElement("option");
CountrySelect.options.length = 0;
CountrySelect.style.display = "inline";
StateElem.text = "Pick a country";
CountrySelect.options.add(StateElem,0);
for(z=1,x=0;x<SortedData.length;x++)
{
	for(y=x+1;y<SortedData.length;y++)
	{
		if(SortedData[x].Region.localeCompare(SortedData[y].Region) != 0)
		{
			StateElem = document.createElement("option");
			StateElem.text = SortedData[y].Region;
			CountrySelect.options.add(StateElem,z++);
			x = y-1;
			break;
		}
	}
}

function DrawCountyData()
{
	var dx,dy;
	var x,y;
	var z;
	var StatColumn = 200;
	var FontSize = 14;
	var Amounts = [];
	var Labels = [];
	var ChartCases = [];
	var ChartFatalities = [];

	// Detailed stats
	dx = 20;
	dy = 30;

	// Vax = GetVaccine(ClickData.Prov);

	ctx.globalAlpha = 1.0;
	ctx.font = "normal 18px Courier";
	ctx.fillStyle = "blue";
	// ctx.fillStyle = CountyColors[x];
	{
		ctx.fillText(ClickData.Prov,dx,dy);

		dy += FontSize;
		ctx.font = "normal 12px Courier";
		ctx.fillStyle = "gray";
		ctx.fillText(ClickData.Region,dx,dy);
		dy += FontSize;
	}
	/*
	if(Vax.length != 0)
	{
		ctx.fillStyle = "green";
		ctx.fillText(Vax,dx,dy);
		dy += FontSize;
	}
	*/

	ctx.font = "normal 12px Courier";
	/*
	if(ClickData.Pop!= 0)
	{
		dy += FontSize;
		ctx.fillStyle = "green";
		ctx.fillText("Pop:",dx,dy);
		ctx.fillText(ClickData.Pop,dx+StatColumn,dy);
	}
	if(ClickData.SqMi!= 0)
	{
		dy += FontSize;
		ctx.fillText("Square Miles:",dx,dy);
		ctx.fillText(Number(ClickData.SqMi).toFixed(2),dx+StatColumn,dy);
	}
	*/
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("Total Cases:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.Cases,dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("Total Fatalities:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.Deaths,dx+StatColumn,dy);

	/*
	if(ClickData.Pop!= 0)
	{
		dy += FontSize;
		ctx.fillStyle = "black";
		ctx.fillText("Cases Per Capita:",dx,dy);
		ctx.fillStyle = "darkred";
		z = (ClickData.PerCapita * 100).toFixed(3);
		ctx.fillText(z + "%",dx+StatColumn,dy);
		dy += FontSize;
		ctx.fillStyle = "black";
		ctx.fillText("Fatalities Per Capita:",dx,dy);
		ctx.fillStyle = "darkred";
		z = (ClickData.DeathsPerCapita * 100).toFixed(3);
		ctx.fillText(z + "%",dx+StatColumn,dy);
		dy += FontSize;
		ctx.fillStyle = "black";
		ctx.fillText("Fatality Rate:",dx,dy);
		ctx.fillStyle = "darkred";
		z = (ClickData.DeathRate * 100).toFixed(3);
		ctx.fillText(z + "%",dx+StatColumn,dy);
	}
	*/

	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("New Cases Today:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.DeltaCases,dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("New Fatalities Today:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.DeltaDeaths,dx+StatColumn,dy);

	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("10 Day Avg New Cases:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.RunningAverageCases.toFixed(3),dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("10 Day Avg New Fatalities:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.RunningAverageDeaths.toFixed(3),dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("10 Day Case Trend:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.TrendCases.toFixed(3),dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("10 Day Fatality Trend:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.TrendDeaths.toFixed(3),dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("Case Trend Direction:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.TrendCases==0?"Even":ClickData.TrendCases<0?"Down":"Up",dx+StatColumn,dy);
	dy += FontSize;
	ctx.fillStyle = "black";
	ctx.fillText("Fatality Trend Direction:",dx,dy);
	ctx.fillStyle = "darkred";
	ctx.fillText(ClickData.TrendDeaths==0?"Even":ClickData.TrendDeaths<0?"Down":"Up",dx+StatColumn,dy);

	ctx.textAlign = "left";
	ctx.textBaseline = "bottom";
}

function RefreshOptionFields()
{
	// this ugliness was required because select/options don't refresh correctly in firefox
	var RefreshArea = document.getElementById("RefreshThis");
	var OldStyle = RefreshArea.style.display;
	RefreshArea.style.display = "none";
	setTimeout(function() { RefreshArea.style.display = OldStyle }, 100);
}

CountrySelect.onchange = function()
{
	var Found = false;
	var CountyElem;
	var x,y,z;

	StateIndex = CountrySelect.selectedIndex;
	var State = CountrySelect[StateIndex].text;

	RegionSelect.options.length = 0;
	CountyElem = document.createElement("option");
	CountyElem.text = "then pick a region";
	RegionSelect.options.add(CountyElem,0);

	CountyElem = document.createElement("option");
	CountyElem.text = "- Show Entire Country -";
	RegionSelect.options.add(CountyElem,1);

	for(z=2,x=0;x<SortedData.length;x++)
	{
		if(SortedData[x].Region.localeCompare(State)==0)
		{
			Found = true;
			CountyElem = document.createElement("option");
			CountyElem.text = SortedData[x].Prov;
			RegionSelect.options.add(CountyElem,z++);
		}
		else
		{
			if(Found)
				break;
		}
	}
	RefreshOptionFields();

	// make a pie chart of the country selected
	ClearScreen();
	var Regions = [];
	var Cases = [];
	var Deaths = [];
	var NumRegions = 0;
	for(x=0;x<ReportDate[DateIndex].Data.length;x++)
	{
		if(ReportDate[DateIndex].Data[x].Region.localeCompare(State) == 0)
		{
			for(y=0;y<Regions.length;y++)
			{
				if(Regions[y].localeCompare(ReportDate[DateIndex].Data[x].Prov) == 0)
				{
					Cases[y] += ReportDate[DateIndex].Data[x].Cases;
					Deaths[y] += ReportDate[DateIndex].Data[x].Deaths;
					break;
				}
			}
			if(y == Regions.length)	// not found
			{
				Regions[NumRegions] = ReportDate[DateIndex].Data[x].Prov;
				Cases[NumRegions] = ReportDate[DateIndex].Data[x].Cases;
				Deaths[NumRegions] = ReportDate[DateIndex].Data[x].Deaths;
				NumRegions++;
			}
		}
	}

	Pie(600,250,200,Cases,Regions);
	// Pie(400,900,Pie2Loc[1],150,Deaths,Regions);
}

var RegionSelect = document.getElementById("RegionSelect");
RegionSelect.style.display = "inline";
RegionSelect.onchange = function()
{
	var ChartDim = [800,350];
	var ChartLoc = [340,50];
	var x,y;

	RefreshOptionFields();

	CountyIndex = RegionSelect.selectedIndex;
	var State = CountrySelect[StateIndex].text;
	var County = RegionSelect[CountyIndex].text;

	if(CountyIndex == 1)	// selection for entire state
	{
		// find state level stats 
		var DataArray = new Array(ReportDate.length);

		for(x=0;x<ReportDate.length;x++)
		{
			DataArray[x] = { Cases:0, Deaths:0, Pop:0, SqMi:0, Adm:"Entire State", Region: "Entire Region", Prov:State };
			for(y=0;y<ReportDate[x].Data.length;y++)
			{
				if(ReportDate[x].Data[y].Region.localeCompare(State) == 0)
				{
					DataArray[x].Cases += ReportDate[x].Data[y].Cases;
					DataArray[x].Deaths += ReportDate[x].Data[y].Deaths;
					DataArray[x].Pop += ReportDate[x].Data[y].Pop;
					DataArray[x].SqMi += ReportDate[x].Data[y].SqMi;
				}
			}
		}

		// eliminate 0 entries at start of series (uneven reporting among countries)
		for(y=x=0;x<DataArray.length;x++)
		{
			if(DataArray[x].Cases == 0)
				y++;
			else
				break;
		}

		for(x=0;x<y;x++)
			DataArray.shift();

		// make date text array
		var DateText = [];
		for(x=y;x<ReportDate.length;x++)
			DateText[x-y] = ReportDate[x].Date;

		for(x=0;x<DataArray.length;x++)
		{
			if(x == 0)
			{
				DataArray[x].DeltaCases = 0;
				DataArray[x].DeltaDeaths = 0;
			}
			else
			{
				DataArray[x].DeltaCases = DataArray[x].Cases - DataArray[x-1].Cases;
				if(DataArray[x].DeltaCases < 0)
					DataArray[x].DeltaCases = 0;
	
				DataArray[x].DeltaDeaths = DataArray[x].Deaths - DataArray[x-1].Deaths;
				if(DataArray[x].DeltaDeaths < 0)
					DataArray[x].DeltaDeaths = 0;
			}
		}

		// 10 day running average
		var RunningAverageDays = 10;
		for(x=0;x<DataArray.length;x++)
		{
			DataArray[x].RunningAverageCases = 0;
			DataArray[x].RunningAverageDeaths = 0;
			if(x < RunningAverageDays)
			{
				for(y=0;y<=x;y++)
				{
					DataArray[x].RunningAverageCases += DataArray[y].DeltaCases;
					DataArray[x].RunningAverageDeaths += DataArray[y].DeltaDeaths;
				}
				DataArray[x].RunningAverageCases /= (x+1);
				DataArray[x].RunningAverageDeaths /= (x+1);
			}
			else
			{
				for(y=x-RunningAverageDays;y<=x;y++)
				{
					DataArray[x].RunningAverageCases += DataArray[y].DeltaCases;
					DataArray[x].RunningAverageDeaths += DataArray[y].DeltaDeaths;
				}
				DataArray[x].RunningAverageCases /= (RunningAverageDays+1);
				DataArray[x].RunningAverageDeaths /= (RunningAverageDays+1);
			}

			if(x == 0)
			{
				DataArray[x].TrendCases = 0;
				DataArray[x].TrendDeaths = 0;
			}
			else
			{
				DataArray[x].TrendCases = DataArray[x].RunningAverageCases - DataArray[x-1].RunningAverageCases;
				DataArray[x].TrendDeaths = DataArray[x].RunningAverageDeaths - DataArray[x-1].RunningAverageDeaths;
			}
		}

		// locate vaccine data, if any
		for(x=0;x<VaxStatsByCountry.length;x++)
		{
			if(VaxStatsByCountry[x].Location.localeCompare(State) == 0)
			{
				VaccineClickData = VaxStatsByCountry[x];
				break;
			}
		}
		if(x == VaxStatsByCountry.length)
			VaccineClickData = "none";

		// Now go through history data and create chart series
		var Cases = [];
		var Deaths = [];
		var DeltaCases = [];
		var DeltaDeaths = [];
		var TotalVaccinations = [];
		var PeopleVaccinatedPercentage = [];
		var PeopleFullyVaccinatedPercentage = [];
		var DailyVaccinations = [];

		for(x=0;x<DataArray.length;x++)
		{
			Cases[x] = DataArray[x].Cases;
			Deaths[x] = DataArray[x].Deaths;
			DeltaCases[x] = DataArray[x].DeltaCases;
			DeltaDeaths[x] = DataArray[x].DeltaDeaths;
		}

		ClickData = DataArray[x-1];
		if(ClickData.Pop != 0)
		{
			ClickData.PerCapita = ClickData.Cases / ClickData.Pop;
			ClickData.DeathsPerCapita = ClickData.Deaths / ClickData.Pop;
			if(ClickData.Cases > 0)
				ClickData.DeathRate = ClickData.Deaths / ClickData.Cases;
			else
				ClickData.DeathRate = 0;
		}
		else
		{
			ClickData.PerCapita = 0;
			ClickData.DeathsPerCapita = 0;
			ClickData.DeathRate = 0;
		}

		if((typeof VaccineClickData).localeCompare("object") == 0)
		{
			for(x=0;x<ReportDate.length;x++)
			{
				TotalVaccinations[x] = 0;
				PeopleFullyVaccinatedPercentage[x] = 0;
				PeopleVaccinatedPercentage[x] = 0;
				DailyVaccinations[x] = 0;
				for(y=0;y<VaccineClickData.Data.length;y++)
				{
					if(VaccineClickData.Data[y].Date.localeCompare(ReportDate[x].Date) == 0)
					{
						TotalVaccinations[x] = VaccineClickData.Data[y].TotalVaccinations;

						if(VaccineClickData.Data[y].PeopleFullyVaccinated != 0)
							PeopleFullyVaccinatedPercentage[x] = (VaccineClickData.Data[y].PeopleFullyVaccinated / (VaccineClickData.Data[y].Pop * 1000) * 100);
						else
							if(x != 0)
								PeopleFullyVaccinatedPercentage[x] = PeopleFullyVaccinatedPercentage[x-1];

						if(VaccineClickData.Data[y].PeopleVaccinated != 0)
							PeopleVaccinatedPercentage[x] = (VaccineClickData.Data[y].PeopleVaccinated / (VaccineClickData.Data[y].Pop * 1000) * 100);
						else
							if(x != 0)
								PeopleVaccinatedPercentage[x] = PeopleVaccinatedPercentage[x-1];
						DailyVaccinations[x] = VaccineClickData.Data[y].DailyVaccinations;
						break;
					}
				}
			}
		}

		ClearScreen();
		
		DrawCountyData();

		XYChart(ChartLoc,ChartDim,ReportDate.length-1,"Total Cases & Deaths",Cases,Deaths,1);

		DrawDates(ChartLoc[0],ChartLoc[1]+ChartDim[1]+20,ChartDim[0],DateText);
	
		XYChart([ChartLoc[0],ChartLoc[1]+ChartDim[1]+100],[ChartDim[0],ChartDim[1]],ReportDate.length-1,"Daily Cases & Deaths With 10 Day Case Trend",DeltaCases,DeltaDeaths,0);

		DrawDates(ChartLoc[0],ChartLoc[1]+(ChartDim[1]*2)+120,ChartDim[0],DateText);
		
		if((typeof VaccineClickData).localeCompare("object") == 0)
		{
			Vax = GetVaccine(ClickData.Prov);
			XYChart([ChartLoc[0],ChartLoc[1]+(ChartDim[1]*2)+180],[ChartDim[0],ChartDim[1]],ReportDate.length-1,"Percentage vaccinated and fully vaccinated - " + Vax,PeopleVaccinatedPercentage,PeopleFullyVaccinatedPercentage,3);
			DrawDates(ChartLoc[0],ChartLoc[1]+(ChartDim[1]*3)+210,ChartDim[0],DateText);
		}

		return;
	}

	// we have to find out county data array
	var DataArray = ReportDate[DateIndex].Data;
	for(x=0;x<DataArray.length;x++)
	{
		if(	(DataArray[x].Prov.localeCompare(County) == 0) &&
			(DataArray[x].Region.localeCompare(State) == 0))
		{
			ClickData = DataArray[x];
			break;
		}
	}

	if(x == DataArray.length)
	{
		console.log(State + " " + County + " was not found");
		return;
	}
	
	// now get history data for that county
	var UndefinedData = { Cases : 0, Deaths : 0 };
	ClickData.HistoryData = new Array(ReportDate.length);	// for tying clickdata to other dates for graphs
	for(x=0;x<ReportDate.length;x++)
	{
		for(y=0;y<ReportDate[x].Data.length;y++)
		{
			if(	(ReportDate[x].Data[y].Region.localeCompare(ClickData.Region) == 0) && (ReportDate[x].Data[y].Prov.localeCompare(ClickData.Prov) == 0))
			// if((ReportDate[x].Data[y].Lat == ClickData.Lat) && (ReportDate[x].Data[y].Long == ClickData.Long))
			{
				ClickData.HistoryData[x] = ReportDate[x].Data[y];
				break;
			}
		}
		if(y == ReportDate[x].Data.length)	// was it not found?
			ClickData.HistoryData[x] = UndefinedData;
	}

	// eliminate leading non reporting data
	for(y=x=0;x<ClickData.HistoryData.length;x++)
	{
		if(ClickData.HistoryData[x].Cases == 0)
			y++;
		else
			break;
	}

	for(x=0;x<y;x++)
		ClickData.HistoryData.shift();

	// make date text array
	var DateText = [];
	for(x=y;x<ReportDate.length;x++)
		DateText[x-y] = ReportDate[x].Date;

	// Create some addition stats based on history

	// delta from prior date
	for(x=0;x<ClickData.HistoryData.length;x++)
	{
		if(x == 0)
		{
			ClickData.HistoryData[x].DeltaCases = 0;
			ClickData.HistoryData[x].DeltaDeaths = 0;
		}
		else
		{
			ClickData.HistoryData[x].DeltaCases = ClickData.HistoryData[x].Cases - ClickData.HistoryData[x-1].Cases;
			if(ClickData.HistoryData[x].DeltaCases < 0)
				ClickData.HistoryData[x].DeltaCases = 0;

			ClickData.HistoryData[x].DeltaDeaths = ClickData.HistoryData[x].Deaths - ClickData.HistoryData[x-1].Deaths;
			if(ClickData.HistoryData[x].DeltaDeaths < 0)
				ClickData.HistoryData[x].DeltaDeaths = 0;
		}
	}

	// 10 day running average
	var RunningAverageDays = 10;
	for(x=0;x<ClickData.HistoryData.length;x++)
	{
		ClickData.HistoryData[x].RunningAverageCases = 0;
		ClickData.HistoryData[x].RunningAverageDeaths = 0;
		if(x < RunningAverageDays)
		{
			for(y=0;y<=x;y++)
			{
				ClickData.HistoryData[x].RunningAverageCases += ClickData.HistoryData[y].DeltaCases;
				ClickData.HistoryData[x].RunningAverageDeaths += ClickData.HistoryData[y].DeltaDeaths;
			}
			ClickData.HistoryData[x].RunningAverageCases /= (x+1);
			ClickData.HistoryData[x].RunningAverageDeaths /= (x+1);
		}
		else
		{
			for(y=x-RunningAverageDays;y<=x;y++)
			{
				ClickData.HistoryData[x].RunningAverageCases += ClickData.HistoryData[y].DeltaCases;
				ClickData.HistoryData[x].RunningAverageDeaths += ClickData.HistoryData[y].DeltaDeaths;
			}
			ClickData.HistoryData[x].RunningAverageCases /= (RunningAverageDays+1);
			ClickData.HistoryData[x].RunningAverageDeaths /= (RunningAverageDays+1);
		}

		if(x == 0)
		{
			ClickData.HistoryData[x].TrendCases = 0;
			ClickData.HistoryData[x].TrendDeaths = 0;
		}
		else
		{
			ClickData.HistoryData[x].TrendCases = ClickData.HistoryData[x].RunningAverageCases - ClickData.HistoryData[x-1].RunningAverageCases;
			ClickData.HistoryData[x].TrendDeaths = ClickData.HistoryData[x].RunningAverageDeaths - ClickData.HistoryData[x-1].RunningAverageDeaths;
		}
	}

	// Now go through history data and create chart series
	var Cases = [];
	var Deaths = [];
	var DeltaCases = [];
	var DeltaDeaths = [];

	for(x=0;x<ClickData.HistoryData.length;x++)
	{
		Cases[x] = ClickData.HistoryData[x].Cases;
		Deaths[x] = ClickData.HistoryData[x].Deaths;
		DeltaCases[x] = ClickData.HistoryData[x].DeltaCases;
		DeltaDeaths[x] = ClickData.HistoryData[x].DeltaDeaths;
	}

	ClearScreen();
	
	DrawCountyData();

	XYChart(ChartLoc,ChartDim,ReportDate.length-1,"Total Cases",Cases,Deaths,1);

	DrawDates(ChartLoc[0],ChartLoc[1]+ChartDim[1]+20,ChartDim[0],DateText);

	XYChart([ChartLoc[0],ChartLoc[1]+ChartDim[1]+100],[ChartDim[0],ChartDim[1]],ReportDate.length-1,"Daily Cases With 10 Day Trend",DeltaCases,DeltaDeaths,0);

	DrawDates(ChartLoc[0],ChartLoc[1]+(ChartDim[1]*2)+120,ChartDim[0],DateText);
}

</script>

</html>
